(()=>{var Y=11;function ie(e,s){var t=s.attributes,n,r,d,o,O;if(!(s.nodeType===Y||e.nodeType===Y)){for(var T=t.length-1;T>=0;T--)n=t[T],r=n.name,d=n.namespaceURI,o=n.value,d?(r=n.localName||r,O=e.getAttributeNS(d,r),O!==o&&(n.prefix==="xmlns"&&(r=n.name),e.setAttributeNS(d,r,o))):(O=e.getAttribute(r),O!==o&&e.setAttribute(r,o));for(var N=e.attributes,u=N.length-1;u>=0;u--)n=N[u],r=n.name,d=n.namespaceURI,d?(r=n.localName||r,s.hasAttributeNS(d,r)||e.removeAttributeNS(d,r)):s.hasAttribute(r)||e.removeAttribute(r)}}var I,se="http://www.w3.org/1999/xhtml",m=typeof document>"u"?void 0:document,fe=!!m&&"content"in m.createElement("template"),ue=!!m&&m.createRange&&"createContextualFragment"in m.createRange();function ce(e){var s=m.createElement("template");return s.innerHTML=e,s.content.childNodes[0]}function le(e){I||(I=m.createRange(),I.selectNode(m.body));var s=I.createContextualFragment(e);return s.childNodes[0]}function de(e){var s=m.createElement("body");return s.innerHTML=e,s.childNodes[0]}function ve(e){return e=e.trim(),fe?ce(e):ue?le(e):de(e)}function F(e,s){var t=e.nodeName,n=s.nodeName,r,d;return t===n?!0:(r=t.charCodeAt(0),d=n.charCodeAt(0),r<=90&&d>=97?t===n.toUpperCase():d<=90&&r>=97?n===t.toUpperCase():!1)}function oe(e,s){return!s||s===se?m.createElement(e):m.createElementNS(s,e)}function he(e,s){for(var t=e.firstChild;t;){var n=t.nextSibling;s.appendChild(t),t=n}return s}function X(e,s,t){e[t]!==s[t]&&(e[t]=s[t],e[t]?e.setAttribute(t,""):e.removeAttribute(t))}var $={OPTION:function(e,s){var t=e.parentNode;if(t){var n=t.nodeName.toUpperCase();n==="OPTGROUP"&&(t=t.parentNode,n=t&&t.nodeName.toUpperCase()),n==="SELECT"&&!t.hasAttribute("multiple")&&(e.hasAttribute("selected")&&!s.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),t.selectedIndex=-1)}X(e,s,"selected")},INPUT:function(e,s){X(e,s,"checked"),X(e,s,"disabled"),e.value!==s.value&&(e.value=s.value),s.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,s){var t=s.value;e.value!==t&&(e.value=t);var n=e.firstChild;if(n){var r=n.nodeValue;if(r==t||!t&&r==e.placeholder)return;n.nodeValue=t}},SELECT:function(e,s){if(!s.hasAttribute("multiple")){for(var t=-1,n=0,r=e.firstChild,d,o;r;)if(o=r.nodeName&&r.nodeName.toUpperCase(),o==="OPTGROUP")d=r,r=d.firstChild;else{if(o==="OPTION"){if(r.hasAttribute("selected")){t=n;break}n++}r=r.nextSibling,!r&&d&&(r=d.nextSibling,d=null)}e.selectedIndex=t}}},B=1,Q=11,Z=3,ee=8;function _(){}function be(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}function pe(e){return function(t,n,r){if(r||(r={}),typeof n=="string")if(t.nodeName==="#document"||t.nodeName==="HTML"||t.nodeName==="BODY"){var d=n;n=m.createElement("html"),n.innerHTML=d}else n=ve(n);else n.nodeType===Q&&(n=n.firstElementChild);var o=r.getNodeKey||be,O=r.onBeforeNodeAdded||_,T=r.onNodeAdded||_,N=r.onBeforeElUpdated||_,u=r.onElUpdated||_,l=r.onBeforeNodeDiscarded||_,v=r.onNodeDiscarded||_,b=r.onBeforeElChildrenUpdated||_,p=r.skipFromChildren||_,S=r.addChild||function(a,i){return a.appendChild(i)},y=r.childrenOnly===!0,g=Object.create(null),w=[];function M(a){w.push(a)}function C(a,i){if(a.nodeType===B)for(var h=a.firstChild;h;){var f=void 0;i&&(f=o(h))?M(f):(v(h),h.firstChild&&C(h,i)),h=h.nextSibling}}function D(a,i,h){l(a)!==!1&&(i&&i.removeChild(a),v(a),C(a,h))}function L(a){if(a.nodeType===B||a.nodeType===Q)for(var i=a.firstChild;i;){var h=o(i);h&&(g[h]=i),L(i),i=i.nextSibling}}L(t);function W(a){T(a);for(var i=a.firstChild;i;){var h=i.nextSibling,f=o(i);if(f){var c=g[f];c&&F(i,c)?(i.parentNode.replaceChild(c,i),j(c,i)):W(i)}else W(i);i=h}}function te(a,i,h){for(;i;){var f=i.nextSibling;(h=o(i))?M(h):D(i,a,!0),i=f}}function j(a,i,h){var f=o(i);if(f&&delete g[f],!h){var c=N(a,i);if(c===!1||(c instanceof HTMLElement&&(a=c,L(a)),e(a,i),u(a),b(a,i)===!1))return}a.nodeName!=="TEXTAREA"?re(a,i):$.TEXTAREA(a,i)}function re(a,i){var h=p(a,i),f=i.firstChild,c=a.firstChild,R,U,V,z,x;e:for(;f;){for(z=f.nextSibling,R=o(f);!h&&c;){if(V=c.nextSibling,f.isSameNode&&f.isSameNode(c)){f=z,c=V;continue e}U=o(c);var H=c.nodeType,P=void 0;if(H===f.nodeType&&(H===B?(R?R!==U&&((x=g[R])?V===x?P=!1:(a.insertBefore(x,c),U?M(U):D(c,a,!0),c=x,U=o(c)):P=!1):U&&(P=!1),P=P!==!1&&F(c,f),P&&j(c,f)):(H===Z||H==ee)&&(P=!0,c.nodeValue!==f.nodeValue&&(c.nodeValue=f.nodeValue))),P){f=z,c=V;continue e}U?M(U):D(c,a,!0),c=V}if(R&&(x=g[R])&&F(x,f))h||S(a,x),j(x,f);else{var K=O(f);K!==!1&&(K&&(f=K),f.actualize&&(f=f.actualize(a.ownerDocument||m)),S(a,f),W(f))}f=z,c=V}te(a,c,U);var J=$[a.nodeName];J&&J(a,i)}var A=t,k=A.nodeType,q=n.nodeType;if(!y){if(k===B)q===B?F(t,n)||(v(t),A=he(t,oe(n.nodeName,n.namespaceURI))):A=n;else if(k===Z||k===ee){if(q===k)return A.nodeValue!==n.nodeValue&&(A.nodeValue=n.nodeValue),A;A=n}}if(A===n)v(t);else{if(n.isSameNode&&n.isSameNode(A))return;if(j(A,n,y),w)for(var E=0,ae=w.length;E<ae;E++){var G=g[w[E]];G&&D(G,G.parentNode,!1)}}return!y&&A!==t&&t.parentNode&&(A.actualize&&(A=A.actualize(t.ownerDocument||m)),t.parentNode.replaceChild(A,t)),A}}var ge=pe(ie),ne=ge;globalThis.arizona=(()=>{function e(u={},l,v){let b=n();typeof l=="function"&&r(b,"connected",l,v);let S={...Object.fromEntries([...new URLSearchParams(window.location.search)]),...u,path:location.pathname};o("connect",{ref:b,queryParams:S})}function s(u,l,v,b,p){let S;typeof b=="function"&&(S=n(),r(S,u,b,p)),o("event",[S,l,u,v])}function t(u,l){let v=!1,b=[];function p(g){return new Promise((w,M)=>{v&&M("alreadyJoined");let C=n();r(C,"join",([D,L])=>{v=D==="ok",v?w(L):M(L)},{once:!0}),o("join",[C,l,u,g])})}function S(g,w){let M=n(),C=r(M,u,g,w);return b.push(C),this}function y(){b.forEach(g=>g()),b.length=0}return Object.freeze({join:p,handle:S,leave:y})}function n(){return Math.random().toString(36).substring(2,9)}function r(u,l,v,b={}){if(typeof v!="function"||typeof b!="object"||Array.isArray(b)){console.error("[Arizona] invalid subscribe data:",{eventName:l,callback:v,opts:b});return}let p=T.get(l);return p||(p=new Map),p.set(u,{ref:u,callback:v,opts:b}),T.set(l,p),N.set(u,l),console.table({action:"subscribed",eventName:l,ref:u,subscribers:T,unsubscribers:N}),function(){d(u)}}function d(u){let l=N.get(u);if(!l)return;let v=T.get(l);v&&(v.delete(u),v.size?T.set(l,v):T.delete(l),N.delete(u),console.table({action:"unsubscribed",eventName:l,ref:u,subscribers:T,unsubscribers:N}))}function o(u,l){O.postMessage({subject:u,attachment:l})}let O=new Worker("assets/js/arizona/worker.js"),T=new Map,N=new Map;return O.addEventListener("message",function(u){console.info("[WebWorker] msg:",u.data);let{ref:l,viewId:v,eventName:b,payload:p}=u.data;switch(b){case"patch":{let y=document.getElementById(v);ne(y,p,{onBeforeElUpdated:(g,w)=>!g.isEqualNode(w)});break}case"leave":{d(p);return}}let S=T.get(b);if(S instanceof Map)if(typeof l=="string"&&l.length){let y=S.get(l);if(!y?.callback)return;y.callback(p)}else S.forEach(function({ref:y,callback:g,opts:w}){g(p),w.once&&d(y)})}),O.addEventListener("error",function(u){console.error("[WebWorker] error:",u)}),Object.freeze({connect:e,send:s,event:t})})();})();
//# sourceMappingURL=arizona.min.js.map
